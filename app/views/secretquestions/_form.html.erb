<%= form_with(model: secretquestion, local: true) do |form| %>
  <% if secretquestion.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(secretquestion.errors.count, "error") %> prohibited this secretquestion from being saved:</h2>

      <ul>
        <% secretquestion.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :text %>
    <%= form.text_field :text %>
  </div>
  <div class="field">
    <%= form.label :typeq, "type secretquestion" %>
    <%= form.select(:typeq, [['Only one answer possible','u'],['Multiple answers possible','m']], {include_blank: true}) %>
  </div>
<table>
<tr>
<th>text</th>
<th>1 reponse</th>
<th>plusieurs reponses</th>
</tr>
<%secretquestion.answers.each do |s|%>
<%=form.fields_for :answers, s do |f|%>
  <tr>
  <td class="field">
    <%= f.label :text, "answer" %>
    <%= f.text_field :text %>
  </td>
  <td class="field">
    <%= f.label "u", "one answer" %>
    <%= f.radio_button "u", s.u, name: "secretquestion[u]",checked: (secretquestion.uniqueanswer && s.good==true)%>
    <%= f.hidden_field "noq", value: s.noq%>

  </td>
  <td class="field">
    <%= f.label "m", "multiple answers" %>

    <%= f.check_box "m",value:"1",checked: (secretquestion.multipleanswer && s.good==true) %>
  </td>
  </tr>

<%end%>
<%end%>

</table>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
