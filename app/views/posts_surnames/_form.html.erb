<%= form_with(model: @posts_surname, local: true) do |f| %>
  <% if @posts_surname.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@posts_surname.errors.count, "error") %> prohibited this @posts_surname from being saved:</h2>

      <ul>
        <% @posts_surname.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
                          <div class="field">


                    </div>



    <%= f.fields_for :surname do |surname| %>
      <div>
        <%= surname.label :name %>
        <%= surname.text_field :name, required: true %>
      </div>
      <div>
        <%= surname.label :image %>
        <%= surname.file_field :image %>
      </div>
    <%end%>

          <div>
        <%= f.label :action_name %>
        <%= f.text_field :action_name %>
          </div>
                                          <%=f.fields_for :thing, Thing.new do |stuff|%>
                                    <div>
        <%= stuff.label :name %>
        <%= stuff.text_field :name %>
      </div>
      <div>
        <%= stuff.label :image %>
        <%= stuff.file_field :image %>
      </div>
                  
                        <%end%>

                <div class="placessurnamesattributes">
                  <button  type="button" onclick="$.ajax({url:'<%=addaplacetosurnameattribute_path%>',success:function(data){myplace.innerHTML=data;}});return false;"><%=t('editpage.posts_surname.addplace')%></button>
                  <div id="myplace"></div>
    <%= f.fields_for :place do |surname| %>
      <div>
        <%= surname.label :name %>
        <%= surname.text_field :name %>
      </div>
      <div>
        <%= surname.label :image %>
        <%= surname.file_field :image %>
        <%= surname.hidden_field :longitude %>
        <%= surname.hidden_field :latitude %>
      </div>
          <div>

                  <%= surname.label :_destroy %>

          <%= surname.check_box :_destroy %>
      </div>
    <%end%>

                </div>
                                <div class="field">
<%= f.label :place_id %>
    <%= f.select("place_id", Place.all.collect {|p| [ p.name, p.id ] },{prompt: 'edit the place'}, { size: 5,multiple: false,allow_blank:true}) %>
                </div>

                <div class="field">

                    <div class="allthesailors-list"> 
      <%= f.label :person_id, "Sailors " %>
      <%= f.collection_radio_buttons(:person_id, Person.afficherceuxla, :id, :name) do |ff| %>
        <%=ff.radio_button%><%=render Person.find(ff.value)%><button onclick='$.ajax({url: "/persondisplay/<%=ff.value%>",success:function(data){$(".editable_fr").append(data);$("#post_content_fr").val($("#post_content_fr").val()+data); }});' id="btn<%=ff.value%>" type="button">add him/her to content</button>
                            <%end%>
                        <%=  f.radio_button( "person_id", nil)%><%= f.label :person_id, t("showpage.posts_surname.person")%>

                    </div>

      </div>
          <div>
    <%=f.hidden_field :sailor_ids, value: @moussaillons.pluck(:id).join(',') %>
          </div>


  <div class="field">
<%=render "form/checkbox", form: form, fieldname: "otherpostssurname_ids", collec: @posts_surname.other_posts_surnames, mesmodele:"posts_surnames"%>
  </div>



  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>


<%=content_for :myjscode do%>
<script>
<%@search=[json_posts_surnames_path]%>
<%@select=[otherpostssurnames_posts_surnames_path]%>

<%@nom=['posts_surnames']%>
<%=render partial:"form/functionjson", collection: @nom.zip(@search, @select), as: :t%>
</script>
<%end%>

