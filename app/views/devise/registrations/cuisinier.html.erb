<h2>Change de cuisinier</h2>



<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= render "devise/shared/error_messages", resource: resource %>


  <div class="field">
    <%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
    <%= f.password_field :current_password, autocomplete: "current-password" %>
  </div>


<p>

Entre ton mot de passe, Recherche ton cuisinier actuel et Clique sur l'assiette pour l'enregistrer 
</p>
  <div class="field">
<%=f.collection_radio_buttons(:cuisinier, User.findbyid(current_user.cuisinier), :id, :name) do |b| %>
       <%=b.radio_button%>
<%=b.label do%>
<%=render partial:'users/usertoque',collection: User.findbyid(b.value), as: :user%>
<%end%>

<% end %>
<%=f.radio_button :cuisinier, ""%>
<%=f.label :cuisinier, "personne"%>
  </div>
      <div><%= text_field_tag :cherchonsattici, "",onchange:"chercherpeople(this,cherchewtla);return false;", id: "cherchonswtici",class:"mysearchfieldavatars" %></div>
        <select onchange="selectpeople(this,attwt);return false;" id="cherchewtla" data-field="action_ids"></select>
<div id="attwt"></div>

<input id="image" name="cuisine" type="image" width="200" height="200" alt="cuisine"
       src="/assets/food2.png">
  <div class="actions">
    <%= f.submit "Update" %>
  </div>
<% end %>

<h3>Cancel my account</h3>

<p>Unhappy? <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %></p>

<%= link_to "Back", :back %>
<%=content_for :myscriptjs do%>
<%end%>
<%=content_for :myjscode do%>
<script>
<%@paths=[madagascar_cuisinier_path]%>
<%@paths2=[membresfoyer_path]%>
<%['people'].each_with_index do |t,i|%>
function chercher<%=t%>(field,al){
$.ajax({url: '<%=@paths2[i]%>?name='+field.value, 
success:function(data){
al.innerHTML="<option></option>";
var value, id;
for (var i=0;i<data.length;i++){
id=data[i].id;
name=data[i].name;
al.innerHTML+="<option value='"+id+"'>"+name+"</option>";
}
}});
};
function select<%=t%>(field,greatpeople){
$.ajax({url: '<%=@paths[i]%>?id='+field.value, 
success:function(data){
greatpeople.innerHTML+=data;
}});
};
<%end%>
</script>
<%end%>

