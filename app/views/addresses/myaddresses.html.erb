<%= fields_for :task,@task do |form| %>

<%if @value%>
<%= form.fields_for :addresses, Address.new do |f| %>
    <div>
  <%=f.collection_select(:city_id, City.all, :id, :name, prompt: "Select a city")%>
</div>
    <div>
  <%=f.collection_select(:country_id, Country.all, :id, :name, prompt: "Select a country")%>
</div>
    <div>
  <%=f.collection_select(:state_id, State.all, :id, :name, prompt: "Select a state")%>
</div>
    <div>
  <%=f.text_area(:address, placeholder: "Enter an address")%>
</div>
<%end%>

<%else%>
  <%=form.collection_select(:address_ids, Address.all, :id, :myaddress, selected: @task.addresses.last, prompt: "Select an address")%>

<%end%>
<%end%>
